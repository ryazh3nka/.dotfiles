### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $editor ~/.local/bin/neovide-open
set $term foot
set $menu bemenu-run -p dmenu -l 5 --binding vim -i -H 26 --fn "UbuntuMono Nerd Font 14" --tb "#282828" \
            --fb "#282828" --nb "#282828" --hb "#504945" --ab "#282828" --sb "#504945" --tf "#ebdbb2" \
            --ff "#ebdbb2" --nf "#ebdbb2" --hf "#ebdbb2" --af "#ebdbb2" --cb "#ebdbb2" --cf "#282828"
            set $colorpicker hyprpicker -a

### Output configuration
output * bg ~/.config/wallpapers/the-ninth-gruv-lowres.png fill

### Decorations
smart_gaps on
smart_borders on
gaps inner 0
gaps inner 0

# class                 border  backgr. text    indicator child_border
client.focused          #4c7899 #285577 #ffffff #2e9ef4   #285577
client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
client.unfocused        #333333 #222222 #888888 #292d2e   #222222
client.urgent           #2f343a #900000 #ffffff #900000   #900000
client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c
client.background       #ffffff

### XWayland
xwayland enable
for_window [shell="xwayland"] title_format "[XWayland] %title"

### Autostart
exec --no-startup-id mako

### Idle configuration
exec swayidle -w \
        timeout 1200 'swaylock -f -c 282828' \
        timeout 4800 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
        before-sleep 'swaylock -f -c 282828'   

### Input configuration
input "type:touchpad" {
        dwt enabled
        tap enabled
        natural_scroll enabled
        middle_emulation enabled
        drag_lock disabled
}

input "type:keyboard" {
        xkb_layout us,ru
        xkb_options "grp:alt_shift_toggle,ctrl:nocaps"
}

### Key bindings
#
# Basics
#
floating_modifier $mod normal

bindsym $mod+Return exec $term
bindsym $mod+q kill
bindsym $mod+d exec sh -c 'pgrep -x bemenu-run && pkill -x bemenu-run || exec $menu'
bindsym $mod+c exec $colorpicker

bindsym $mod+Shift+c reload
bindsym $mod+Shift+x exec swaylock -f -c 282828
bindsym $mod+Shift+m exec swaymsg exit

#
# Moving around:
#
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

#
# Workspaces:
#
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

#
# Layout stuff:
#
bindsym $mod+o splith
bindsym $mod+i splitv

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+f fullscreen

bindsym $mod+Shift+tab floating toggle
bindsym $mod+tab focus mode_toggle

bindsym $mod+a focus parent
bindsym $mod+z focus child

#
# Scratchpad:
#
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

#
# Resizing containers:
#
mode "resize" {
        bindsym $left resize grow width 10px
        bindsym $down resize shrink height 10px
        bindsym $up resize grow height 10px
        bindsym $right resize shrink width 10px

        bindsym Left resize grow width 10px
        bindsym Down resize shrink height 10px
        bindsym Up resize grow height 10px
        bindsym Right resize shrink width 10px

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

#
# Sound:
#
bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle

bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+

#
# Utilities
#

bindsym Print exec grim -g "$(slurp -d)" - | wl-copy
bindsym Shift+Print exec grim $(xdg-user-dir PICTURES)/$(date +'screenshot-%d_%m_%Y-%H%M%S.png')

bindsym $mod+p exec $editor

### Status Bar:
bar {
        position bottom
        height 26
        font UbuntuMono Nerd Font

        status_command while date +'%Y-%m-%d %X'; do sleep 1; done

        colors {
                statusline #ffffff
                separator #ffffff
                background #222222
                inactive_workspace #323232 #323232 #ffffff
        }
        status_command i3status
}

### Rules
assign [app_id="org.qutebrowser.qutebrowser"] 1
assign [app_id="neovide"] 1
assign [app_id="org.telegram.desktop"] 4
assign [class="steam"] 5

for_window [class="org-opensourcephysics-cabrillo-tracker-Tracker"] floating enable
for_window [class="org-opensourcephysics-cabrillo-tracker-Tracker"] move position center

for_window [workspace=2] border pixel 2
workspace 2 gaps inner 0
workspace 2 gaps outer 0

include /etc/sway/config.d/*
